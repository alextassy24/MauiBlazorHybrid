@inherits LayoutComponentBase
@inject NavigationManager NavigationManager
@inject UserState UserState

<div class="flex flex-col min-h-screen bg-gray-100">
    <header class="fixed top-0 z-50 w-full">
        <TopNavMenu />
    </header>

    <main class="flex-grow mt-14">
        @Body
    </main>

    @if (UserState.IsLoggedIn && !ShouldHideFooter())
    {
        <footer class="fixed bottom-0 z-50 w-full">
            <BottomNavMenu />
        </footer>
    }
</div>

@code {
    private bool ShouldHideFooter()
    {
        var currentUri = NavigationManager.Uri.Replace(NavigationManager.BaseUri, "").TrimEnd('/');
        var pagesToHideFooter = new[] { "login", "register", "forgot-password", "verify" };
        return pagesToHideFooter.Any(page => currentUri.StartsWith(page, StringComparison.OrdinalIgnoreCase));
    }
}
